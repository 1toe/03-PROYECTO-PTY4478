import supabase from '../../utils/supabase';

export interface Producto {
  ean: string;
  name_vtex?: string;
  name_okto?: string;
  brand_id?: number;
  category_vtex_id?: string;
  sku_item_vtex?: string;
  sku_producto_vtex?: string;
  description_short_vtex?: string;
  description_long_okto?: string;
  net_content_vtex?: string;
  flavor_okto?: string;
  size_value_okto?: number;
  size_unit_okto?: string;
  packaging_type_okto?: string;
  origin_country_okto?: string;
  url_scraped?: string;
  last_scraped_at?: string;
  
  // Datos relacionados (joins)
  brand_name?: string;
  category_name?: string;
  category_slug?: string;
  price_current?: string;
  price_list?: string;
  is_in_offer?: boolean;
  saving_text?: string;
  image_url?: string;
  warnings?: ProductWarning[];

  // Para compatibilidad con componentes existentes
  id?: string;
  nombre_producto?: string;
  marca?: string;
  sku?: string;
  precio?: number;
  url_imagen?: string;
  categoria?: string;
  peso_gramos?: number;
  descripcion?: string;
  en_oferta?: boolean;
}

export interface ProductWarning {
  warning_code: string;
  description?: string;
}

export interface ProductWithDetails extends Producto {
  ingredients?: string[];
  allergens?: string[];
  nutritional_values?: NutritionalValue[];
  certifications?: ProductCertification[];
}

export interface NutritionalValue {
  nutrient_name: string;
  value_per_100g?: string;
  value_per_portion?: string;
  unit?: string;
}

export interface ProductCertification {
  certification_code: string;
  name?: string;
  description?: string;
  icon_url?: string;
}

// Nueva interfaz para representar la categor√≠a
export interface Categoria {
  category_vtex_id: string;
  name: string;
  category_okto_id: string;
}